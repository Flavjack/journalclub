---
format:
  html:
    toc: true
    toc-location: left
    number-sections: true
    self-contained: true
  docx:
    toc: false
    section-numbers: true
    reference-doc: prospect/style.docx
    output-file: "manuscript"
editor_options: 
  chunk_output_type: console
execute:
  echo: false
  warning: false
crossref:
  fig-title: Fig.
  fig-prefix: Fig.
---

```{r}
#| label: setup

source("http://inkaverse.com/docs.r")
# https://docs.google.com/document/d/1gd8ByWAeJuqVtz72u-l6CzwOPEqJixfAdkgk4nQmkUQ/edit

doc <- inti::gdoc2qmd(file = "manuscript.zip", format = "qmd"
                      , type = "listfull"
                      )
```

```{r}
#| results: 'asis'

rticle <- knitr::knit_child(doc$path, quiet = TRUE)
cat(rticle, sep = '\n')
```

# Image pdf to jpeg

```{r}
#| eval: false

library(tidyverse)
library(magick)

pdf4pub <- list.files("files/", pattern = "Fig.*pdf", full.names = T) 

path <- "prospect/"

imgs <- 1:length(pdf4pub) %>% map(\(x) {
  
  filename <- pdf4pub[x] %>% 
    basename() %>% 
    gsub(".pdf", "\\1.jpeg", .) 
  
  pdf4pub[x] %>% 
    image_read_pdf() %>% 
    image_write(format = "jpeg", file.path(path, filename))
  
})
```


